
{% extends "base.html" %}


{% block script %}
<script type="text/javascript">
      $(document).ready(function() {
	$('#change_pass').ajaxForm({ beforeSubmit:showRequest, success:showResponse, dataType:'json', clearForm:true, resetForm:true });

	function showRequest(formData, jqForm, options) {
           $.blockUI({ message: $('.loading'), css: {top:'10px', left:'', right:'10px'} });
           $("#change_pass :submit").prop("disabled", true);
           return true;
	}

	function showResponse(responseText, statusText, xhr, $form) {
          $.unblockUI();
          //bootbox.alert(responseText.message, function(){ window.location="/users/";} );
          if (responseText.data[0]['ERROR']) {
              bootbox.alert(responseText.data[0]['MESSAGE']);
              $("#change_pass :submit").prop("disabled", false);
              return true;
	  }
          bootbox.alert(responseText.data[0]['MESSAGE'], function(){ window.location=responseText.data[0]['REDIRECT'];} );
	}

     // Tabs
     $('#tabs').tabs();

   });
</script>
{% endblock %}
   

	{% block menu %}
       <div class="sidebar-nav">
       <form class="search form-inline"><input type="text" placeholder="Search..."></form>

        <a href="#dashboard-menu" class="nav-header" data-toggle="collapse"><i class="icon-briefcase"></i>Directory Users</a>


        <a href="#accounts-users" class="nav-header collapsed" data-toggle="collapse"><i class="icon-legal"></i>{{utils[0]['domain']}}<i class="icon-chevron-up"></i></a>
        <ul id="accounts-users" class="nav nav-list collapse in">
            <li class="active"><a href="/users/">Users</a></li>
            <li ><a href="#">Groups</a></li>
        </ul>

        <a href="#accounts-menu" class="nav-header collapsed" data-toggle="collapse"><i class="icon-legal"></i>SMB4 Config<i class="icon-chevron-up"></i></a>
        <ul id="accounts-menu" class="nav nav-list collapse">
            <li ><a href="#">Users</a></li>
            <li ><a href="#">Groups</a></li>
            <li ><a href="#">Members</a></li>
        </ul>

    </div>
   {% endblock %}

   
{% block content %}
   <div class="content">
        <div class="header"><h1 class="page-title">Edit User</h1></div>
        
        <ul class="breadcrumb">
            <li><a href="/">Home</a> <span class="divider">/</span></li>
            <li><a href="/users/">Users</a> <span class="divider">/</span></li>
            <li class="active">User</li>
        </ul>

 <div class="container-fluid">
    <div class="row-fluid">

     <div class="well">

 <div id="tabs">
	<ul><li><a href="#tabs-1">Profile</a></li><li><a href="#tabs-2">Password</a></li></ul>
	<div id="tabs-1">
    <form id="tab">
        <label>Username</label>
        <input type="text" value="{{user.username}}" disabled="disabled" class="span5 input-xlarge">
        <label>Full name</label>
        <input type="text" value="{{user.fullname}}" class="span5 input-xlarge">
        <label>Email</label>
        <input type="text" value="{{user.username}}" class="span5 input-xlarge">@{{utils[0]['domain']}}
    </form>
        <div>
            <button class="btn btn-primary"><i class="icon-save"></i> Save</button>
            <button class="btn"><i class="icon-trash"></i> Delete</button>
        </div>
</div>
<div id="tabs-2">
    <form id="change_pass" action="/users/edit/{{user.rid}}" method="post">
        <label>New Password</label>
        <input name="password" type="password" class="input-xlarge" pattern=".{7,}" title="Minmimum 7, letters and numbers." required="true">
        <input name="username" type="hidden" value="{{user.username}}">
        <div>
            <button type="submit" name="submit" value="Submit" class="btn btn-primary">Update</button>
        </div>
    </form>
</div>
</div>
			
</div>
</div>
</div>

{% endblock %}
